<!-- START Top Navbar-->
<nav role="navigation" class="navbar topnavbar">
    <!-- START navbar header-->
    <div class="navbar-header">
        <a href="#/" class="navbar-brand">
            <div class="brand-logo text-white">
                <div class="lead">Smart Cloud of Things</div>
                <!--<img src="app/img/logo.png" alt="App Logo" class="img-responsive" />-->
            </div>
            <div class="brand-logo-collapsed">
                <img src="app/img/logo-single.png" alt="App Logo" class="img-responsive"/>
            </div>
        </a>
    </div>
    <!-- END navbar header-->
    <!-- START Nav wrapper-->
    <div class="nav-wrapper">
        <!-- START Left navbar-->
        <ul class="nav navbar-nav">
            <li>
                <!-- Button used to collapse the left sidebar. Only visible on tablet and desktops-->
                <a ng-click="app.layout.isCollapsed = !app.layout.isCollapsed" class="hidden-xs">
                    <em class="fa fa-navicon"></em>
                </a>
                <!-- Button to show/hide the sidebar on mobile. Visible on mobile only.-->
                <a toggle-state="aside-toggled" no-persist="no-persist" class="visible-xs sidebar-toggle">
                    <em class="fa fa-navicon"></em>
                </a>
            </li>
            <!-- START User login-->
            <li ng-if="!AuthService.isLogged">
                <a ui-sref="page.login" title="Login">
                    <em class="icon-login"></em>
                </a>
            </li>
            <!-- END User login-->
            <!-- START User avatar toggle-->
            <li ng-if="AuthService.isLogged">
                <!-- Button used to collapse the left sidebar. Only visible on tablet and desktops-->
                <a ng-click="toggleUserBlock()">
                    <em class="icon-user"></em>
                </a>
            </li>
            <!-- END User avatar toggle-->
            <!-- START lock screen-->
            <!--<li ng-if="AuthService.isLogged">-->
            <!--<a ui-sref="page.lock" title="Lock screen">-->
            <!--<em class="icon-lock"></em>-->
            <!--</a>-->
            <!--</li>-->
            <!-- END lock screen-->
            <!-- START User logout-->
            <li ng-if="AuthService.isLogged" ng-controller="LoginFormController">
                <a ng-click="logout()" title="Logout">
                    <em class="icon-logout"></em>
                </a>
            </li>
            <!-- END User logout-->

            <!--&lt;!&ndash; START Loading bar start&ndash;&gt;-->
            <!--<li>-->
            <!--<a ng-click="cfpLoadingBar.start()" title="Start">-->
            <!--<em class="icon-control-play"></em>-->
            <!--</a>-->
            <!--</li>-->
            <!--&lt;!&ndash; END Loading bar start&ndash;&gt;-->
            <!--&lt;!&ndash; START Loading bar complete&ndash;&gt;-->
            <!--<li>-->
            <!--<a ng-click="cfpLoadingBar.complete()" title="Complete">-->
            <!--<em class="icon-close"></em>-->
            <!--</a>-->
            <!--</li>-->
            <!--&lt;!&ndash; END Loading bar complete&ndash;&gt;-->

        </ul>
        <!-- END Left navbar-->
        <!-- START Right Navbar-->
        <ul class="nav navbar-nav navbar-right">
            <!-- Search icon-->
            <li ng-if="AuthService.isLogged" dropdown="" class="dropdown dropdown-list">
                <a dropdown-toggle="">
                    <em class="icon-bell"></em>

                    <div ng-show="last_notifications.unread > 0" class="label label-danger">{{ last_notifications.unread }}</div>
                </a>
                <!-- START Dropdown menu-->
                <ul class="dropdown-menu animated fadeIn">
                    <li>
                        <!-- START list group-->
                        <div class="list-group">
                            <a ng-click="markAllAsRead()" class="list-group-item">
                                <small>Marcar tudo como visto</small>
                            </a>
                            <a href="#" class="list-group-item" ng-repeat="nt in last_notifications.list">
                                <div class="media-box">
                                    <div class="media-box-body clearfix">
                                        <div class="m0">

                                        <div ng-if="!nt.read" class="ng-binding ng-scope">
                                            <div class="pull-left label label-success">nova</div>
                                            <div ng-if="!nt.read" ng-click="markMessageAs(nt.id, true)" class="pull-right label label-primary">mark as read</div>
                                            <div ng-if="nt.read" class="pull-right label label-default">marcar como lida</div>
                                        </div>&nbsp;
                                        {{ nt.notification.title[language.selected.localeId] }}
                                        </div>
                                        <div class="m0 text-muted pull-right">
                                            <small>{{ nt.notification.timestamp }}</small>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a ui-sref="app.notifications" class="list-group-item">
                                <small>Mais notificações</small>
                                <small class="pull-right">{{last_notifications.total}}</small>
                            </a>
                        </div>
                        <!-- END list group-->
                    </li>
                </ul>
                <!-- END Dropdown menu-->
            </li>
            <li dropdown="" class="dropdown dropdown-list">
                <a dropdown-toggle="">
                    <em class="fa fa-flag"></em>

                    <div class="label">
                        <div class="famfamfam-flags" ng-class="language.selected.iconid"></div>
                    </div>
                </a>
                <ul class="dropdown-menu animated fadeIn">
                    <li>
                        <div class="list-group">
                            <a href="#" class="list-group-item" ng-repeat="(localeId, lang) in language.available"
                               ng-click="language.set(localeId, $event)">
                                <div class="media-box">
                                    <div class="pull-left">
                                        <div class="text-info famfamfam-flags" ng-class="lang.iconid"></div>
                                    </div>
                                    <div class="media-box-body clearfix">
                                        <p class="m0">{{lang.name}}</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </li>
                </ul>

            </li>
            <!--<li>
                <a search-open="">
                    <em class="icon-magnifier"></em>
                </a>
            </li>-->
            <!-- START Offsidebar button-->
            <!--<li>
                <a toggle-state="offsidebar-open" no-persist="no-persist">
                    <em class="icon-notebook"></em>
                </a>
            </li>-->
            <!-- END Offsidebar menu-->
        </ul>
        <!-- END Right Navbar-->
    </div>
    <!-- END Nav wrapper-->
    <!-- START Search form-->
    <form role="search" action="search.html" class="navbar-form">
        <div class="form-group has-feedback">
            <input type="text" placeholder="{{ 'topbar.search.PLACEHOLDER' | translate }}" class="form-control"/>

            <div search-dismiss="search-dismiss" class="fa fa-times form-control-feedback"></div>
        </div>
        <button type="submit" class="hidden btn btn-default">{{"topbar.SUBMITSEARCH" | translate}}</button>
    </form>
    <!-- END Search form-->
</nav>
<!-- END Top Navbar-->